{% extends "base.html" %}
{% block title %}Admin : {{ request.site.name }}{% endblock %}
{% block head %}
<link rel="stylesheet" href="/css/reset.css" media="all" type="text/css" />
<link rel="stylesheet" href="/css/admin.css" media="all" type="text/css" />
{% endblock %}

{% block contents %}

<h1>Admin</h1>

<div>
    <a href="/">View Site</a>
</div>

<div id="add-module">
    <form id="add-module-form" method="post">
        <label for="id_module_type">Add new module</label>
        {{ form.module_type }}
        <input type="submit" value="Add" class="button" />
    </form>
</div>

<div id="module-list">
	<h2>Your Modules</h2>
	<br />
    {% for module in request.site.modules.all %}
        {% ifequal module.id current_module.link.id %}
	       <div class="module current"><a href="/admin/{{ module.id }}/">{{ module.module_label }}</a></div>
        {% else %}
	       <div class="module"><a href="/admin/{{ module.id }}/">{{ module.module_label }}</a></div>
        {% endifequal %}
    {% endfor %}
</div>

<div id="admin-pane">
	<h2>Current Module Admin</h2>
	<br />
	<div class="admin-sub-pane">
{% if current_module %}
		{{ current_module.render_admin }}
{% else %}
		OMG! No module selected! We should have probably re-directed you to the first module or something!
{% endif %}
	</div>
</div>

<div style="clear: both"></div>

{% endblock %}